// Mixins - Nova Solar Theme

// Responsive Breakpoint Mixin
@mixin breakpoint($breakpoint) {
    @if map-has-key($breakpoints, $breakpoint) {
        @media (min-width: map-get($breakpoints, $breakpoint)) {
            @content;
        }
    } @else {
        @warn "Unknown breakpoint: #{$breakpoint}";
    }
}

// Responsive Breakpoint Down
@mixin breakpoint-down($breakpoint) {
    @if map-has-key($breakpoints, $breakpoint) {
        @media (max-width: #{map-get($breakpoints, $breakpoint) - 0.02px}) {
            @content;
        }
    } @else {
        @warn "Unknown breakpoint: #{$breakpoint}";
    }
}

// Flex Center
@mixin flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

// Absolute Center
@mixin absolute-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

// Button Base
@mixin button-base {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--nova-spacing-sm) var(--nova-spacing-md);
    font-size: var(--nova-font-size-base);
    line-height: var(--nova-line-height-base);
    font-family: var(--nova-font-family-base);
    font-weight: 500;
    text-decoration: none;
    border: 1px solid transparent;
    border-radius: var(--nova-radius-md);
    cursor: pointer;
    transition: all var(--nova-transition-base) ease;
    
    &:hover {
        transform: translateY(-1px);
    }
    
    &:active {
        transform: translateY(0);
    }
    
    &:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(var(--nova-primary), 0.25);
    }
    
    &:disabled {
        opacity: 0.65;
        cursor: not-allowed;
    }
}

// Transition
@mixin transition($properties...) {
    transition-property: $properties;
    transition-duration: var(--nova-transition-base);
    transition-timing-function: ease;
}

// Truncate Text
@mixin truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

// Line Clamp
@mixin line-clamp($lines) {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

// Scrollbar Styling
@mixin custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: var(--nova-gray-600) var(--nova-bg-secondary);
    
    &::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }
    
    &::-webkit-scrollbar-track {
        background: var(--nova-bg-secondary);
    }
    
    &::-webkit-scrollbar-thumb {
        background: var(--nova-gray-600);
        border-radius: var(--nova-radius-sm);
        
        &:hover {
            background: var(--nova-gray-500);
        }
    }
}

// Glass Effect
@mixin glass-effect {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

// Dot Background Pattern
@mixin dot-pattern {
    background-image: radial-gradient(circle, var(--nova-border-color) 1px, transparent 1px);
    background-size: 20px 20px;
    background-position: 0 0, 10px 10px;
}

// Fish Eye Effect for Dots
@mixin fisheye-dots {
    position: relative;
    overflow: hidden;
    
    &::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background-image: 
            radial-gradient(
                ellipse at center,
                transparent 0%,
                transparent 30%,
                var(--nova-bg-primary) 70%,
                var(--nova-bg-primary) 100%
            ),
            radial-gradient(
                circle at 1px 1px,
                var(--nova-border-color) 1px,
                transparent 1px
            );
        background-size: 100% 100%, 20px 20px;
        background-position: center, 0 0;
        opacity: 0.3;
        pointer-events: none;
    }
}

// Container
@mixin container {
    width: 100%;
    padding-right: var(--nova-spacing-md);
    padding-left: var(--nova-spacing-md);
    margin-right: auto;
    margin-left: auto;
    
    @each $breakpoint, $container-max-width in $container-max-widths {
        @include breakpoint($breakpoint) {
            max-width: $container-max-width;
        }
    }
}

// Grid
@mixin make-row {
    display: flex;
    flex-wrap: wrap;
    margin-right: calc(var(--nova-spacing-md) * -0.5);
    margin-left: calc(var(--nova-spacing-md) * -0.5);
}

@mixin make-col($size, $columns: $grid-columns) {
    flex: 0 0 percentage($size / $columns);
    max-width: percentage($size / $columns);
    padding-right: calc(var(--nova-spacing-md) * 0.5);
    padding-left: calc(var(--nova-spacing-md) * 0.5);
}
